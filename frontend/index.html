<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CharonSpace - 登录</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
</head>
<body>
    <div id="app">
        <!-- 登录页面 -->
        <div class="container" v-if="!isLoggedIn">
            <h1>用户登录</h1>
            <div class="login-form">
                <div class="form-group">
                    <label for="username">用户名</label>
                    <input type="text" id="username" v-model="username" placeholder="请输入用户名" required>
                </div>
                <div class="form-group">
                    <label for="password">密码</label>
                    <input type="password" id="password" v-model="password" placeholder="请输入密码" required>
                </div>
                <div class="error-message" v-if="error">{{ error }}</div>
                <button class="login-btn" @click="login" :disabled="isLoading">
                    {{ isLoading ? '登录中...' : '登录' }}
                </button>
            </div>
        </div>

        <!-- 登录成功页面 -->
        <div class="app-container" v-else>
            <!-- 顶部导航栏 -->
            <header class="top-header">
                <div class="username-display">欢迎，<strong>{{ username }}</strong></div>
                <button class="logout-btn" @click="logout">登出</button>
            </header>
            
            <!-- 主内容区域 -->
            <div class="main-content">
                <!-- 左侧菜单栏 -->
                <aside class="sidebar">
                    <h2>菜单管理</h2>
                    <ul class="menu-list">
                        <!-- 动态渲染菜单 -->
                        <li v-for="parentMenu in menuTree" :key="parentMenu.id" class="menu-item parent-menu">
                            <div class="menu-title" @click="toggleMenu(getMenuKey(parentMenu))">
                                <span>{{ parentMenu.name }}</span>
                                <span class="arrow" :class="{ expanded: expandedMenus.includes(getMenuKey(parentMenu)) }">▼</span>
                            </div>
                            <ul class="submenu" v-show="expandedMenus.includes(getMenuKey(parentMenu))">
                                <li v-for="childMenu in parentMenu.children"
                                    :key="childMenu.id"
                                    class="submenu-item"
                                    :class="{ active: activeMenu === childMenu.route }"
                                    @click="setActiveMenu(childMenu.route)">
                                    {{ childMenu.name }}
                                </li>
                            </ul>
                        </li>
                    </ul>
                </aside>
                
                <!-- 右侧内容区域 -->
                <div class="content-area">
                    <!-- 学生管理页面 -->
                    <div v-if="activeMenu === 'students'">
                        <div class="page-header">
                            <h1>学生管理</h1>
                            <button class="add-btn" @click="openAddStudentModal">新增学生</button>
                        </div>

                        <!-- 筛选表单 -->
                        <div class="filter-form">
                            <div class="filter-row">
                                <div class="filter-item">
                                    <label for="studentIdFilter">ID</label>
                                    <input type="number" id="studentIdFilter" v-model="studentFilters.id" placeholder="请输入ID">
                                </div>
                                <div class="filter-item">
                                    <label for="studentNameFilter">姓名</label>
                                    <input type="text" id="studentNameFilter" v-model="studentFilters.name" placeholder="请输入姓名">
                                </div>
                                <div class="filter-item">
                                    <label for="studentGradeFilter">年级</label>
                                    <select id="studentGradeFilter" v-model="studentFilters.grade">
                                        <option value="">全部</option>
                                        <option value="一年级">一年级</option>
                                        <option value="二年级">二年级</option>
                                        <option value="三年级">三年级</option>
                                        <option value="四年级">四年级</option>
                                        <option value="五年级">五年级</option>
                                        <option value="六年级">六年级</option>
                                    </select>
                                </div>
                                <div class="filter-item">
                                    <label for="studentStatusFilter">状态</label>
                                    <select id="studentStatusFilter" v-model="studentFilters.status">
                                        <option value="">全部</option>
                                        <option value="0">启用</option>
                                        <option value="1">禁用</option>
                                    </select>
                                </div>
                            </div>
                            <div class="filter-actions">
                                <button class="search-btn" @click="searchStudents">搜索</button>
                                <button class="reset-btn" @click="resetStudentFilters">重置</button>
                            </div>
                        </div>
                        
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>学生姓名</th>
                                    <th>性别</th>
                                    <th>年级</th>
                                    <th>电话</th>
                                    <th>教练姓名</th>
                                    <th>状态</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="student in paginatedStudents" :key="student.id">
                                    <td>{{ student.id }}</td>
                                    <td>{{ student.student_name }}</td>
                                    <td>{{ student.sex }}</td>
                                    <td>{{ student.grade }}</td>
                                    <td>{{ student.phone }}</td>
                                    <td>{{ student.coach_names }}</td>
                                    <td>{{ student.status === 0 ? '启用' : '禁用' }}</td>
                                    <td class="action-column">
                                        <button class="edit-btn" @click="openEditStudentModal(student)">编辑</button>
                                        <button v-if="student.status === 1" class="enable-btn" @click="updateStudentStatus(student.id, 0)">启用</button>
                                        <button v-if="student.status === 0" class="disable-btn" @click="updateStudentStatus(student.id, 1)">禁用</button>
                                        <button class="delete-btn" @click="openDeleteConfirm(student.id, 'student')">删除</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>

                        <!-- 学生分页控件 -->
                        <div class="pagination" v-if="studentTotalPages > 1">
                            <button class="page-btn" @click="changeStudentPage(1)" :disabled="studentCurrentPage === 1">首页</button>
                            <button class="page-btn" @click="changeStudentPage(studentCurrentPage - 1)" :disabled="studentCurrentPage === 1">上一页</button>
                            <span class="page-info">第 {{ studentCurrentPage }} / {{ studentTotalPages }} 页</span>
                            <button class="page-btn" @click="changeStudentPage(studentCurrentPage + 1)" :disabled="studentCurrentPage === studentTotalPages">下一页</button>
                            <button class="page-btn" @click="changeStudentPage(studentTotalPages)" :disabled="studentCurrentPage === studentTotalPages">末页</button>
                        </div>
                    </div>
                    
                    <!-- 教练管理页面 -->
                    <div v-if="activeMenu === 'coaches'">
                        <div class="page-header">
                            <h1>教练管理</h1>
                            <button class="add-btn" @click="openAddCoachModal">新增教练</button>
                        </div>

                        <!-- 筛选表单 -->
                        <div class="filter-form">
                            <div class="filter-row">
                                <div class="filter-item">
                                    <label for="coachIdFilter">ID</label>
                                    <input type="number" id="coachIdFilter" v-model="coachFilters.id" placeholder="请输入ID">
                                </div>
                                <div class="filter-item">
                                    <label for="coachNameFilter">姓名</label>
                                    <input type="text" id="coachNameFilter" v-model="coachFilters.name" placeholder="请输入姓名">
                                </div>
                                <div class="filter-item">
                                    <label for="coachSexFilter">性别</label>
                                    <select id="coachSexFilter" v-model="coachFilters.sex">
                                        <option value="">全部</option>
                                        <option value="男">男</option>
                                        <option value="女">女</option>
                                    </select>
                                </div>
                                <div class="filter-item">
                                    <label for="coachSubjectFilter">学科</label>
                                    <select id="coachSubjectFilter" v-model="coachFilters.subject">
                                        <option value="">全部</option>
                                        <option value="语文">语文</option>
                                        <option value="数学">数学</option>
                                        <option value="英语">英语</option>
                                        <option value="物理">物理</option>
                                        <option value="化学">化学</option>
                                        <option value="生物">生物</option>
                                        <option value="历史">历史</option>
                                        <option value="地理">地理</option>
                                        <option value="政治">政治</option>
                                    </select>
                                </div>
                                <div class="filter-item">
                                    <label for="coachStatusFilter">状态</label>
                                    <select id="coachStatusFilter" v-model="coachFilters.status">
                                        <option value="">全部</option>
                                        <option value="0">启用</option>
                                        <option value="1">禁用</option>
                                    </select>
                                </div>
                            </div>
                            <div class="filter-actions">
                                <button class="search-btn" @click="searchCoaches">搜索</button>
                                <button class="reset-btn" @click="resetCoachFilters">重置</button>
                            </div>
                        </div>
                        
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>教练姓名</th>
                                    <th>性别</th>
                                    <th>学科</th>
                                    <th>电话</th>
                                    <th>状态</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="coach in paginatedCoaches" :key="coach.id">
                                    <td>{{ coach.id }}</td>
                                    <td>{{ coach.coach_name }}</td>
                                    <td>{{ coach.sex }}</td>
                                    <td>{{ coach.subject }}</td>
                                    <td>{{ coach.phone }}</td>
                                    <td>{{ coach.status === 0 ? '启用' : '禁用' }}</td>
                                    <td class="action-column">
                                        <button class="edit-btn" @click="openEditCoachModal(coach)">编辑</button>
                                        <button v-if="coach.status === 1" class="enable-btn" @click="updateCoachStatus(coach.id, 0)">启用</button>
                                        <button v-if="coach.status === 0" class="disable-btn" @click="updateCoachStatus(coach.id, 1)">禁用</button>
                                        <button class="delete-btn" @click="openDeleteConfirm(coach.id, 'coach')">删除</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>

                        <!-- 教练分页控件 -->
                        <div class="pagination" v-if="coachTotalPages > 1">
                            <button class="page-btn" @click="changeCoachPage(1)" :disabled="coachCurrentPage === 1">首页</button>
                            <button class="page-btn" @click="changeCoachPage(coachCurrentPage - 1)" :disabled="coachCurrentPage === 1">上一页</button>
                            <span class="page-info">第 {{ coachCurrentPage }} / {{ coachTotalPages }} 页</span>
                            <button class="page-btn" @click="changeCoachPage(coachCurrentPage + 1)" :disabled="coachCurrentPage === coachTotalPages">下一页</button>
                            <button class="page-btn" @click="changeCoachPage(coachTotalPages)" :disabled="coachCurrentPage === coachTotalPages">末页</button>
                        </div>
                    </div>

                    <!-- 订单管理页面 -->
                    <div v-if="activeMenu === 'orders'">
                        <div class="page-header">
                            <h1>订单管理</h1>
                            <button class="add-btn" @click="openAddOrderModal">新增订单</button>
                        </div>

                        <!-- 筛选表单 -->
                        <div class="filter-form">
                            <div class="filter-row">
                                <div class="filter-item">
                                    <label for="orderIdFilter">ID</label>
                                    <input type="number" id="orderIdFilter" v-model="orderFilters.id" placeholder="请输入ID">
                                </div>
                                <div class="filter-item">
                                    <label for="orderUidFilter">UID</label>
                                    <input type="number" id="orderUidFilter" v-model="orderFilters.uid" placeholder="请输入UID">
                                </div>
                                <div class="filter-item">
                                    <label for="orderStatusFilter">审核状态</label>
                                    <select id="orderStatusFilter" v-model="orderFilters.status">
                                        <option value="">全部</option>
                                        <option value="10">草稿</option>
                                        <option value="20">审核中</option>
                                        <option value="30">已通过</option>
                                        <option value="40">已驳回</option>
                                        <option value="99">已作废</option>
                                    </select>
                                </div>
                            </div>
                            <div class="filter-actions">
                                <button class="search-btn" @click="searchOrders">搜索</button>
                                <button class="reset-btn" @click="resetOrderFilters">重置</button>
                            </div>
                        </div>

                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>UID</th>
                                    <th>下单时间</th>
                                    <th>姓名</th>
                                    <th>应收金额</th>
                                    <th>实收金额</th>
                                    <th>审核状态</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="order in paginatedOrders" :key="order.id">
                                    <td>{{ order.id }}</td>
                                    <td>{{ order.uid }}</td>
                                    <td>{{ order.create_time }}</td>
                                    <td>{{ order.student_name }}</td>
                                    <td>{{ order.amount_receivable }}</td>
                                    <td>{{ order.amount_received }}</td>
                                    <td>{{ getOrderStatusText(order.status) }}</td>
                                    <td class="action-column">
                                        <button v-if="order.status === 10" class="edit-btn" @click="openEditOrderModal(order)">编辑</button>
                                        <button v-if="order.status === 10" class="delete-btn" @click="openCancelOrderConfirm(order.id)">作废</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>

                        <!-- 订单分页控件 -->
                        <div class="pagination" v-if="orderTotalPages > 1">
                            <button class="page-btn" @click="changeOrderPage(1)" :disabled="orderCurrentPage === 1">首页</button>
                            <button class="page-btn" @click="changeOrderPage(orderCurrentPage - 1)" :disabled="orderCurrentPage === 1">上一页</button>
                            <span class="page-info">第 {{ orderCurrentPage }} / {{ orderTotalPages }} 页</span>
                            <button class="page-btn" @click="changeOrderPage(orderCurrentPage + 1)" :disabled="orderCurrentPage === orderTotalPages">下一页</button>
                            <button class="page-btn" @click="changeOrderPage(orderTotalPages)" :disabled="orderCurrentPage === orderTotalPages">末页</button>
                        </div>
                    </div>

                    <!-- 账号管理页面 -->
                    <div v-if="activeMenu === 'accounts'">
                        <h1>账号管理</h1>

                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>账号</th>
                                    <th>密码</th>
                                    <th>状态</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="account in paginatedAccounts" :key="account.id">
                                    <td>{{ account.id }}</td>
                                    <td>{{ account.username }}</td>
                                    <td>{{ account.password }}</td>
                                    <td>{{ account.status === 0 ? '启用' : '禁用' }}</td>
                                    <td class="action-column">
                                        <button v-if="account.status === 1" class="enable-btn" @click="enableAccount(account.id)">启用</button>
                                        <button v-if="account.status === 0" class="disable-btn" @click="disableAccount(account.id)">禁用</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>

                        <!-- 账号分页控件 -->
                        <div class="pagination" v-if="accountTotalPages > 1">
                            <button class="page-btn" @click="changeAccountPage(1)" :disabled="accountCurrentPage === 1">首页</button>
                            <button class="page-btn" @click="changeAccountPage(accountCurrentPage - 1)" :disabled="accountCurrentPage === 1">上一页</button>
                            <span class="page-info">第 {{ accountCurrentPage }} / {{ accountTotalPages }} 页</span>
                            <button class="page-btn" @click="changeAccountPage(accountCurrentPage + 1)" :disabled="accountCurrentPage === accountTotalPages">下一页</button>
                            <button class="page-btn" @click="changeAccountPage(accountTotalPages)" :disabled="accountCurrentPage === accountTotalPages">末页</button>
                        </div>
                    </div>

                    <!-- 属性管理页面 -->
                    <div v-if="activeMenu === 'attributes'">
                        <div class="page-header">
                            <h1>属性管理</h1>
                            <button class="add-btn" @click="openAddAttributeModal">新增属性</button>
                        </div>

                        <!-- 筛选表单 -->
                        <div class="filter-form">
                            <div class="filter-row">
                                <div class="filter-item">
                                    <label for="attributeIdFilter">ID</label>
                                    <input type="number" id="attributeIdFilter" v-model="attributeFilters.id" placeholder="请输入ID">
                                </div>
                                <div class="filter-item">
                                    <label for="attributeClassifyFilter">分类</label>
                                    <select id="attributeClassifyFilter" v-model="attributeFilters.classify">
                                        <option value="">全部</option>
                                        <option value="0">属性</option>
                                        <option value="1">规格</option>
                                    </select>
                                </div>
                                <div class="filter-item">
                                    <label for="attributeStatusFilter">状态</label>
                                    <select id="attributeStatusFilter" v-model="attributeFilters.status">
                                        <option value="">全部</option>
                                        <option value="0">启用</option>
                                        <option value="1">禁用</option>
                                    </select>
                                </div>
                            </div>
                            <div class="filter-actions">
                                <button class="search-btn" @click="searchAttributes">搜索</button>
                                <button class="reset-btn" @click="resetAttributeFilters">重置</button>
                            </div>
                        </div>

                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>名字</th>
                                    <th>分类</th>
                                    <th>属性值</th>
                                    <th>状态</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="attribute in paginatedAttributes" :key="attribute.id">
                                    <td>{{ attribute.id }}</td>
                                    <td>{{ attribute.name }}</td>
                                    <td>{{ getClassifyText(attribute.classify) }}</td>
                                    <td>{{ attribute.value_count || 0 }}</td>
                                    <td>{{ getAttributeStatusText(attribute.status) }}</td>
                                    <td class="action-column">
                                        <button class="edit-btn" @click="openEditAttributeModal(attribute)">编辑</button>
                                        <button class="edit-btn" @click="openAttributeValuesModal(attribute)">属性值</button>
                                        <button v-if="attribute.status === 1" class="enable-btn" @click="openEnableAttributeConfirm(attribute.id)">启用</button>
                                        <button v-if="attribute.status === 0" class="disable-btn" @click="openDisableAttributeConfirm(attribute.id)">禁用</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>

                        <!-- 属性分页控件 -->
                        <div class="pagination" v-if="attributeTotalPages > 1">
                            <button class="page-btn" @click="changeAttributePage(1)" :disabled="attributeCurrentPage === 1">首页</button>
                            <button class="page-btn" @click="changeAttributePage(attributeCurrentPage - 1)" :disabled="attributeCurrentPage === 1">上一页</button>
                            <span class="page-info">第 {{ attributeCurrentPage }} / {{ attributeTotalPages }} 页</span>
                            <button class="page-btn" @click="changeAttributePage(attributeCurrentPage + 1)" :disabled="attributeCurrentPage === attributeTotalPages">下一页</button>
                            <button class="page-btn" @click="changeAttributePage(attributeTotalPages)" :disabled="attributeCurrentPage === attributeTotalPages">末页</button>
                        </div>
                    </div>

                    <!-- 类型管理页面 -->
                    <div v-if="activeMenu === 'classifies'">
                        <div class="page-header">
                            <h1>类型管理</h1>
                            <button class="add-btn" @click="openAddClassifyModal">新增</button>
                        </div>

                        <!-- 筛选表单 -->
                        <div class="filter-form">
                            <div class="filter-row">
                                <div class="filter-item">
                                    <label for="classifyIdFilter">ID</label>
                                    <input type="number" id="classifyIdFilter" v-model="classifyFilters.id" placeholder="请输入ID">
                                </div>
                                <div class="filter-item">
                                    <label for="classifyLevelFilter">级别</label>
                                    <select id="classifyLevelFilter" v-model="classifyFilters.level">
                                        <option value="">全部</option>
                                        <option value="0">一级</option>
                                        <option value="1">二级</option>
                                    </select>
                                </div>
                                <div class="filter-item">
                                    <label for="classifyStatusFilter">状态</label>
                                    <select id="classifyStatusFilter" v-model="classifyFilters.status">
                                        <option value="">全部</option>
                                        <option value="0">启用</option>
                                        <option value="1">禁用</option>
                                    </select>
                                </div>
                            </div>
                            <div class="filter-actions">
                                <button class="search-btn" @click="searchClassifies">搜索</button>
                                <button class="reset-btn" @click="resetClassifyFilters">重置</button>
                            </div>
                        </div>

                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>名称</th>
                                    <th>级别</th>
                                    <th>状态</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="classify in paginatedClassifies" :key="classify.id">
                                    <td>{{ classify.id }}</td>
                                    <td>{{ classify.name }}</td>
                                    <td>{{ getClassifyLevelText(classify.level) }}</td>
                                    <td>{{ getClassifyStatusText(classify.status) }}</td>
                                    <td class="action-column">
                                        <button class="edit-btn" @click="openEditClassifyModal(classify)">编辑</button>
                                        <button v-if="classify.status === 1" class="enable-btn" @click="openEnableClassifyConfirm(classify.id)">启用</button>
                                        <button v-if="classify.status === 0" class="disable-btn" @click="openDisableClassifyConfirm(classify.id)">禁用</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>

                        <!-- 类型分页控件 -->
                        <div class="pagination" v-if="classifyTotalPages > 1">
                            <button class="page-btn" @click="changeClassifyPage(1)" :disabled="classifyCurrentPage === 1">首页</button>
                            <button class="page-btn" @click="changeClassifyPage(classifyCurrentPage - 1)" :disabled="classifyCurrentPage === 1">上一页</button>
                            <span class="page-info">第 {{ classifyCurrentPage }} / {{ classifyTotalPages }} 页</span>
                            <button class="page-btn" @click="changeClassifyPage(classifyCurrentPage + 1)" :disabled="classifyCurrentPage === classifyTotalPages">下一页</button>
                            <button class="page-btn" @click="changeClassifyPage(classifyTotalPages)" :disabled="classifyCurrentPage === classifyTotalPages">末页</button>
                        </div>
                    </div>

                    <!-- 品牌管理页面 -->
                    <div v-if="activeMenu === 'brands'">
                        <div class="page-header">
                            <h1>品牌管理</h1>
                            <button class="add-btn" @click="openAddBrandModal">新增</button>
                        </div>

                        <!-- 筛选表单 -->
                        <div class="filter-form">
                            <div class="filter-row">
                                <div class="filter-item">
                                    <label for="brandIdFilter">ID</label>
                                    <input type="number" id="brandIdFilter" v-model="brandFilters.id" placeholder="请输入ID">
                                </div>
                                <div class="filter-item">
                                    <label for="brandNameFilter">名称</label>
                                    <input type="text" id="brandNameFilter" v-model="brandFilters.name" placeholder="请输入名称">
                                </div>
                                <div class="filter-item">
                                    <label for="brandStatusFilter">状态</label>
                                    <select id="brandStatusFilter" v-model="brandFilters.status">
                                        <option value="">全部</option>
                                        <option value="0">启用</option>
                                        <option value="1">禁用</option>
                                    </select>
                                </div>
                            </div>
                            <div class="filter-actions">
                                <button class="search-btn" @click="searchBrands">搜索</button>
                                <button class="reset-btn" @click="resetBrandFilters">重置</button>
                            </div>
                        </div>

                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>名称</th>
                                    <th>状态</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="brand in paginatedBrands" :key="brand.id">
                                    <td>{{ brand.id }}</td>
                                    <td>{{ brand.name }}</td>
                                    <td>{{ getBrandStatusText(brand.status) }}</td>
                                    <td class="action-column">
                                        <button class="edit-btn" @click="openEditBrandModal(brand)">编辑</button>
                                        <button v-if="brand.status === 1" class="enable-btn" @click="openEnableBrandConfirm(brand.id)">启用</button>
                                        <button v-if="brand.status === 0" class="disable-btn" @click="openDisableBrandConfirm(brand.id)">禁用</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>

                        <!-- 品牌分页控件 -->
                        <div class="pagination" v-if="brandTotalPages > 1">
                            <button class="page-btn" @click="changeBrandPage(1)" :disabled="brandCurrentPage === 1">首页</button>
                            <button class="page-btn" @click="changeBrandPage(brandCurrentPage - 1)" :disabled="brandCurrentPage === 1">上一页</button>
                            <span class="page-info">第 {{ brandCurrentPage }} / {{ brandTotalPages }} 页</span>
                            <button class="page-btn" @click="changeBrandPage(brandCurrentPage + 1)" :disabled="brandCurrentPage === brandTotalPages">下一页</button>
                            <button class="page-btn" @click="changeBrandPage(brandTotalPages)" :disabled="brandCurrentPage === brandTotalPages">末页</button>
                        </div>
                    </div>

                    <!-- 商品管理页面 -->
                    <div v-if="activeMenu === 'goods'">
                        <div class="page-header">
                            <h1>商品管理</h1>
                            <button class="add-btn" @click="openAddGoodsDrawer">新增</button>
                        </div>

                        <!-- 筛选表单 -->
                        <div class="filter-form">
                            <div class="filter-row">
                                <div class="filter-item">
                                    <label for="goodsIdFilter">ID</label>
                                    <input type="number" id="goodsIdFilter" v-model="goodsFilters.id" placeholder="请输入ID">
                                </div>
                                <div class="filter-item">
                                    <label for="goodsNameFilter">名称</label>
                                    <input type="text" id="goodsNameFilter" v-model="goodsFilters.name" placeholder="请输入名称">
                                </div>
                                <div class="filter-item">
                                    <label for="goodsBrandFilter">品牌</label>
                                    <select id="goodsBrandFilter" v-model="goodsFilters.brandid">
                                        <option value="">全部</option>
                                        <option v-for="brand in brands" :key="brand.id" :value="brand.id">{{ brand.name }}</option>
                                    </select>
                                </div>
                                <div class="filter-item">
                                    <label for="goodsClassifyFilter">类型</label>
                                    <select id="goodsClassifyFilter" v-model="goodsFilters.classifyid">
                                        <option value="">全部</option>
                                        <option v-for="classify in classifies" :key="classify.id" :value="classify.id">{{ classify.name }}</option>
                                    </select>
                                </div>
                                <div class="filter-item">
                                    <label for="goodsStatusFilter">状态</label>
                                    <select id="goodsStatusFilter" v-model="goodsFilters.status">
                                        <option value="">全部</option>
                                        <option value="0">启用</option>
                                        <option value="1">禁用</option>
                                    </select>
                                </div>
                            </div>
                            <div class="filter-actions">
                                <button class="search-btn" @click="searchGoods">搜索</button>
                                <button class="reset-btn" @click="resetGoodsFilters">重置</button>
                            </div>
                        </div>

                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>名称</th>
                                    <th>价格</th>
                                    <th>品牌</th>
                                    <th>类型</th>
                                    <th>属性</th>
                                    <th>状态</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="goods in paginatedGoods" :key="goods.id">
                                    <td>{{ goods.id }}</td>
                                    <td>{{ goods.name }}</td>
                                    <td>{{ goods.price }}</td>
                                    <td>{{ goods.brand_name }}</td>
                                    <td>{{ goods.classify_name }}</td>
                                    <td :title="getFullAttributes(goods)" class="goods-attributes-cell">
                                        {{ formatGoodsAttributes(goods) || '无' }}
                                    </td>
                                    <td>{{ goods.status === 0 ? '启用' : '禁用' }}</td>
                                    <td class="action-column">
                                        <button class="edit-btn" @click="openEditGoodsDrawer(goods.id)">编辑</button>
                                        <button v-if="goods.status === 1" class="enable-btn" @click="openEnableGoodsConfirm(goods.id)">启用</button>
                                        <button v-if="goods.status === 0" class="disable-btn" @click="openDisableGoodsConfirm(goods.id)">禁用</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>

                        <!-- 商品分页控件 -->
                        <div class="pagination" v-if="goodsTotalPages > 1">
                            <button class="page-btn" @click="changeGoodsPage(1)" :disabled="goodsCurrentPage === 1">首页</button>
                            <button class="page-btn" @click="changeGoodsPage(goodsCurrentPage - 1)" :disabled="goodsCurrentPage === 1">上一页</button>
                            <span class="page-info">第 {{ goodsCurrentPage }} / {{ goodsTotalPages }} 页</span>
                            <button class="page-btn" @click="changeGoodsPage(goodsCurrentPage + 1)" :disabled="goodsCurrentPage === goodsTotalPages">下一页</button>
                            <button class="page-btn" @click="changeGoodsPage(goodsTotalPages)" :disabled="goodsCurrentPage === goodsTotalPages">末页</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 新增学生弹窗 -->
        <div class="modal-overlay" v-if="showAddStudentModal">
            <div class="modal">
                <div class="modal-header">
                    <h3>新增学生</h3>
                    <button class="close-btn" @click="closeAddStudentModal">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="addStudentName">姓名 <span class="required">*</span></label>
                        <input type="text" id="addStudentName" v-model="addStudentData.name" placeholder="请输入姓名" required>
                    </div>
                    <div class="form-group">
                        <label for="addStudentSex">性别 <span class="required">*</span></label>
                        <select id="addStudentSex" v-model="addStudentData.sex_id" required>
                            <option value="">请选择性别</option>
                            <option v-for="sex in sexes" :key="sex.id" :value="sex.id">{{ sex.name }}</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="addStudentPhone">电话 <span class="required">*</span></label>
                        <input type="text" id="addStudentPhone" v-model="addStudentData.phone" placeholder="请输入电话" required>
                    </div>
                    <div class="form-group">
                        <label for="addStudentGrade">年级 <span class="required">*</span></label>
                        <select id="addStudentGrade" v-model="addStudentData.grade_id" required>
                            <option value="">请选择年级</option>
                            <option v-for="grade in activeGrades" :key="grade.id" :value="grade.id">{{ grade.grade }}</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="addStudentCoaches">教练</label>
                        <div class="multi-select">
                            <div v-for="coach in activeCoaches" :key="coach.id" class="checkbox-item">
                                <input
                                    type="checkbox"
                                    :id="'coach-' + coach.id"
                                    :value="coach.id"
                                    v-model="addStudentData.coach_ids">
                                <label :for="'coach-' + coach.id">{{ coach.coach_name }}</label>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="cancel-btn" @click="closeAddStudentModal">取消</button>
                    <button class="save-btn" @click="saveAddStudent">保存</button>
                </div>
            </div>
        </div>

        <!-- 学生编辑弹窗 -->
        <div class="modal-overlay" v-if="showEditStudentModal">
            <div class="modal">
                <div class="modal-header">
                    <h3>编辑学生信息</h3>
                    <button class="close-btn" @click="closeEditStudentModal">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="editStudentName">姓名</label>
                        <input type="text" id="editStudentName" v-model="editStudentData.name" placeholder="请输入姓名">
                    </div>
                    <div class="form-group">
                        <label for="editStudentSex">性别</label>
                        <select id="editStudentSex" v-model="editStudentData.sex_id">
                            <option v-for="sex in sexes" :key="sex.id" :value="sex.id">{{ sex.name }}</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="editStudentPhone">手机号</label>
                        <input type="text" id="editStudentPhone" v-model="editStudentData.phone" placeholder="请输入手机号">
                    </div>
                    <div class="form-group">
                        <label for="editStudentGrade">年级</label>
                        <select id="editStudentGrade" v-model="editStudentData.grade_id">
                            <option v-for="grade in activeGrades" :key="grade.id" :value="grade.id">{{ grade.grade }}</option>
                        </select>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="cancel-btn" @click="closeEditStudentModal">取消</button>
                    <button class="save-btn" @click="saveEditStudent">保存</button>
                </div>
            </div>
        </div>
        
        <!-- 教练编辑弹窗 -->
        <div class="modal-overlay" v-if="showEditCoachModal">
            <div class="modal">
                <div class="modal-header">
                    <h3>编辑教练信息</h3>
                    <button class="close-btn" @click="closeEditCoachModal">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="editCoachName">姓名</label>
                        <input type="text" id="editCoachName" v-model="editCoachData.name" placeholder="请输入姓名">
                    </div>
                    <div class="form-group">
                        <label for="editCoachSex">性别</label>
                        <select id="editCoachSex" v-model="editCoachData.sex_id">
                            <option v-for="sex in sexes" :key="sex.id" :value="sex.id">{{ sex.name }}</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="editCoachPhone">手机号</label>
                        <input type="text" id="editCoachPhone" v-model="editCoachData.phone" placeholder="请输入手机号">
                    </div>
                    <div class="form-group">
                        <label for="editCoachSubject">学科</label>
                        <select id="editCoachSubject" v-model="editCoachData.subject_id">
                            <option v-for="subject in activeSubjects" :key="subject.id" :value="subject.id">{{ subject.subject }}</option>
                        </select>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="cancel-btn" @click="closeEditCoachModal">取消</button>
                    <button class="save-btn" @click="saveEditCoach">保存</button>
                </div>
            </div>
        </div>

        <!-- 新增教练弹窗 -->
        <div class="modal-overlay" v-if="showAddCoachModal">
            <div class="modal">
                <div class="modal-header">
                    <h3>新增教练</h3>
                    <button class="close-btn" @click="closeAddCoachModal">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="addCoachName">姓名 <span class="required">*</span></label>
                        <input type="text" id="addCoachName" v-model="addCoachData.name" placeholder="请输入姓名" required>
                    </div>
                    <div class="form-group">
                        <label for="addCoachSex">性别 <span class="required">*</span></label>
                        <select id="addCoachSex" v-model="addCoachData.sex_id" required>
                            <option value="">请选择性别</option>
                            <option v-for="sex in sexes" :key="sex.id" :value="sex.id">{{ sex.name }}</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="addCoachPhone">电话 <span class="required">*</span></label>
                        <input type="text" id="addCoachPhone" v-model="addCoachData.phone" placeholder="请输入电话" required>
                    </div>
                    <div class="form-group">
                        <label for="addCoachSubject">学科 <span class="required">*</span></label>
                        <select id="addCoachSubject" v-model="addCoachData.subject_id" required>
                            <option value="">请选择学科</option>
                            <option v-for="subject in activeSubjects" :key="subject.id" :value="subject.id">{{ subject.subject }}</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="addCoachStudents">学生</label>
                        <div class="multi-select">
                            <div v-for="student in activeStudents" :key="student.id" class="checkbox-item">
                                <input
                                    type="checkbox"
                                    :id="'student-' + student.id"
                                    :value="student.id"
                                    v-model="addCoachData.student_ids">
                                <label :for="'student-' + student.id">{{ student.student_name }}</label>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="cancel-btn" @click="closeAddCoachModal">取消</button>
                    <button class="save-btn" @click="saveAddCoach">保存</button>
                </div>
            </div>
        </div>

        <!-- 删除确认弹窗 -->
        <div class="modal-overlay" v-if="showDeleteConfirm">
            <div class="modal">
                <div class="modal-header">
                    <h3>确认删除</h3>
                    <button class="close-btn" @click="closeDeleteConfirm">&times;</button>
                </div>
                <div class="modal-body">
                    <p>是否确认删除该条数据？</p>
                </div>
                <div class="modal-footer">
                    <button class="cancel-btn" @click="closeDeleteConfirm">取消</button>
                    <button class="delete-btn" @click="confirmDelete">确认删除</button>
                </div>
            </div>
        </div>

        <!-- 新增订单弹窗 -->
        <div class="modal-overlay" v-if="showAddOrderModal">
            <div class="modal">
                <div class="modal-header">
                    <h3>新增订单</h3>
                    <button class="close-btn" @click="closeAddOrderModal">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="addOrderUid">UID <span class="required">*</span></label>
                        <select id="addOrderUid" v-model="addOrderData.student_id" @change="onStudentChange" required>
                            <option value="">请选择学生</option>
                            <option v-for="student in activeStudentsForOrder" :key="student.id" :value="student.id">{{ student.id }}</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="addOrderStudentName">学生姓名</label>
                        <input type="text" id="addOrderStudentName" v-model="addOrderData.student_name" readonly placeholder="选择UID后自动显示">
                    </div>
                    <div class="form-group">
                        <label for="addOrderAmount">应收金额 <span class="required">*</span></label>
                        <input type="number" step="0.01" id="addOrderAmount" v-model="addOrderData.amount_receivable" placeholder="请输入应收金额" required>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="cancel-btn" @click="closeAddOrderModal">取消</button>
                    <button class="save-btn" @click="saveAddOrder">确认</button>
                </div>
            </div>
        </div>

        <!-- 编辑订单弹窗 -->
        <div class="modal-overlay" v-if="showEditOrderModal">
            <div class="modal">
                <div class="modal-header">
                    <h3>编辑订单</h3>
                    <button class="close-btn" @click="closeEditOrderModal">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="editOrderUid">UID <span class="required">*</span></label>
                        <select id="editOrderUid" v-model="editOrderData.student_id" @change="onEditStudentChange" required>
                            <option value="">请选择学生</option>
                            <option v-for="student in activeStudentsForOrder" :key="student.id" :value="student.id">{{ student.id }}</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="editOrderStudentName">学生姓名</label>
                        <input type="text" id="editOrderStudentName" v-model="editOrderData.student_name" readonly placeholder="选择UID后自动显示">
                    </div>
                    <div class="form-group">
                        <label for="editOrderAmount">应收金额 <span class="required">*</span></label>
                        <input type="number" step="0.01" id="editOrderAmount" v-model="editOrderData.amount_receivable" placeholder="请输入应收金额" required>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="cancel-btn" @click="closeEditOrderModal">取消</button>
                    <button class="save-btn" @click="saveEditOrder">确认</button>
                </div>
            </div>
        </div>

        <!-- 作废订单确认弹窗 -->
        <div class="modal-overlay" v-if="showCancelOrderConfirm">
            <div class="modal">
                <div class="modal-header">
                    <h3>确认作废</h3>
                    <button class="close-btn" @click="closeCancelOrderConfirm">&times;</button>
                </div>
                <div class="modal-body">
                    <p>是否确认作废该订单？</p>
                </div>
                <div class="modal-footer">
                    <button class="cancel-btn" @click="closeCancelOrderConfirm">否</button>
                    <button class="delete-btn" @click="confirmCancelOrder">是</button>
                </div>
            </div>
        </div>

        <!-- 新增属性弹窗 -->
        <div class="modal-overlay" v-if="showAddAttributeModal">
            <div class="modal">
                <div class="modal-header">
                    <h3>新增属性</h3>
                    <button class="close-btn" @click="closeAddAttributeModal">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="addAttributeName">名字 <span class="required">*</span></label>
                        <input type="text" id="addAttributeName" v-model="addAttributeData.name" placeholder="请输入名字" required>
                    </div>
                    <div class="form-group">
                        <label for="addAttributeClassify">分类 <span class="required">*</span></label>
                        <select id="addAttributeClassify" v-model="addAttributeData.classify" required>
                            <option value="">请选择分类</option>
                            <option value="0">属性</option>
                            <option value="1">规格</option>
                        </select>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="cancel-btn" @click="closeAddAttributeModal">取消</button>
                    <button class="save-btn" @click="saveAddAttribute">确定</button>
                </div>
            </div>
        </div>

        <!-- 编辑属性弹窗 -->
        <div class="modal-overlay" v-if="showEditAttributeModal">
            <div class="modal">
                <div class="modal-header">
                    <h3>编辑属性</h3>
                    <button class="close-btn" @click="closeEditAttributeModal">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="editAttributeName">名字 <span class="required">*</span></label>
                        <input type="text" id="editAttributeName" v-model="editAttributeData.name" placeholder="请输入名字" required>
                    </div>
                    <div class="form-group">
                        <label for="editAttributeClassify">分类 <span class="required">*</span></label>
                        <select id="editAttributeClassify" v-model="editAttributeData.classify" required>
                            <option value="">请选择分类</option>
                            <option value="0">属性</option>
                            <option value="1">规格</option>
                        </select>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="cancel-btn" @click="closeEditAttributeModal">取消</button>
                    <button class="save-btn" @click="saveEditAttribute">确定</button>
                </div>
            </div>
        </div>

        <!-- 启用属性确认弹窗 -->
        <div class="modal-overlay" v-if="showEnableAttributeConfirm">
            <div class="modal">
                <div class="modal-header">
                    <h3>确认启用</h3>
                    <button class="close-btn" @click="closeEnableAttributeConfirm">&times;</button>
                </div>
                <div class="modal-body">
                    <p>是否启用该属性？</p>
                </div>
                <div class="modal-footer">
                    <button class="cancel-btn" @click="closeEnableAttributeConfirm">否</button>
                    <button class="save-btn" @click="confirmEnableAttribute">是</button>
                </div>
            </div>
        </div>

        <!-- 禁用属性确认弹窗 -->
        <div class="modal-overlay" v-if="showDisableAttributeConfirm">
            <div class="modal">
                <div class="modal-header">
                    <h3>确认禁用</h3>
                    <button class="close-btn" @click="closeDisableAttributeConfirm">&times;</button>
                </div>
                <div class="modal-body">
                    <p>是否禁用该属性？</p>
                </div>
                <div class="modal-footer">
                    <button class="cancel-btn" @click="closeDisableAttributeConfirm">否</button>
                    <button class="delete-btn" @click="confirmDisableAttribute">是</button>
                </div>
            </div>
        </div>

        <!-- 新增类型弹窗 -->
        <div class="modal-overlay" v-if="showAddClassifyModal">
            <div class="modal">
                <div class="modal-header">
                    <h3>新增类型</h3>
                    <button class="close-btn" @click="closeAddClassifyModal">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="addClassifyName">名称 <span class="required">*</span></label>
                        <input type="text" id="addClassifyName" v-model="addClassifyData.name" placeholder="请输入名称" required>
                    </div>
                    <div class="form-group">
                        <label for="addClassifyLevel">级别 <span class="required">*</span></label>
                        <select id="addClassifyLevel" v-model="addClassifyData.level" @change="onAddClassifyLevelChange" required>
                            <option value="">请选择级别</option>
                            <option value="0">一级</option>
                            <option value="1">二级</option>
                        </select>
                    </div>
                    <div class="form-group" v-if="addClassifyData.level === '1'">
                        <label for="addClassifyParent">父级类型 <span class="required">*</span></label>
                        <select id="addClassifyParent" v-model="addClassifyData.parent_id" required>
                            <option value="">请选择父级类型</option>
                            <option v-for="parent in parentClassifies" :key="parent.id" :value="parent.id">{{ parent.name }}</option>
                        </select>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="cancel-btn" @click="closeAddClassifyModal">取消</button>
                    <button class="save-btn" @click="saveAddClassify">确定</button>
                </div>
            </div>
        </div>

        <!-- 编辑类型弹窗 -->
        <div class="modal-overlay" v-if="showEditClassifyModal">
            <div class="modal">
                <div class="modal-header">
                    <h3>编辑类型</h3>
                    <button class="close-btn" @click="closeEditClassifyModal">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="editClassifyName">名称 <span class="required">*</span></label>
                        <input type="text" id="editClassifyName" v-model="editClassifyData.name" placeholder="请输入名称" required>
                    </div>
                    <div class="form-group">
                        <label for="editClassifyLevel">级别 <span class="required">*</span></label>
                        <select id="editClassifyLevel" v-model="editClassifyData.level" @change="onEditClassifyLevelChange" required>
                            <option value="">请选择级别</option>
                            <option value="0">一级</option>
                            <option value="1">二级</option>
                        </select>
                    </div>
                    <div class="form-group" v-if="editClassifyData.level === 1 || editClassifyData.level === '1'">
                        <label for="editClassifyParent">父级类型 <span class="required">*</span></label>
                        <select id="editClassifyParent" v-model="editClassifyData.parent_id" required>
                            <option value="">请选择父级类型</option>
                            <option v-for="parent in parentClassifies" :key="parent.id" :value="parent.id">{{ parent.name }}</option>
                        </select>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="cancel-btn" @click="closeEditClassifyModal">取消</button>
                    <button class="save-btn" @click="saveEditClassify">确定</button>
                </div>
            </div>
        </div>

        <!-- 启用类型确认弹窗 -->
        <div class="modal-overlay" v-if="showEnableClassifyConfirm">
            <div class="modal">
                <div class="modal-header">
                    <h3>确认启用</h3>
                    <button class="close-btn" @click="closeEnableClassifyConfirm">&times;</button>
                </div>
                <div class="modal-body">
                    <p>是否启用该类型？</p>
                </div>
                <div class="modal-footer">
                    <button class="cancel-btn" @click="closeEnableClassifyConfirm">否</button>
                    <button class="save-btn" @click="confirmEnableClassify">是</button>
                </div>
            </div>
        </div>

        <!-- 禁用类型确认弹窗 -->
        <div class="modal-overlay" v-if="showDisableClassifyConfirm">
            <div class="modal">
                <div class="modal-header">
                    <h3>确认禁用</h3>
                    <button class="close-btn" @click="closeDisableClassifyConfirm">&times;</button>
                </div>
                <div class="modal-body">
                    <p>是否禁用该类型？</p>
                </div>
                <div class="modal-footer">
                    <button class="cancel-btn" @click="closeDisableClassifyConfirm">否</button>
                    <button class="delete-btn" @click="confirmDisableClassify">是</button>
                </div>
            </div>
        </div>

        <!-- 属性值管理弹窗 -->
        <div class="modal-overlay" v-if="showAttributeValuesModal">
            <div class="modal">
                <div class="modal-header">
                    <h3>属性值管理</h3>
                    <button class="close-btn" @click="closeAttributeValuesModal">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label>属性名称</label>
                        <input type="text" :value="currentAttributeName" readonly>
                    </div>
                    <div class="form-group">
                        <label>属性值 <span class="required">*</span></label>
                        <div v-for="(value, index) in attributeValues" :key="index" class="value-input-row">
                            <input
                                type="text"
                                v-model="attributeValues[index]"
                                placeholder="请输入属性值"
                                class="value-input">
                            <button
                                v-if="attributeValues.length > 1"
                                class="remove-btn"
                                @click="removeAttributeValueInput(index)">-</button>
                            <button
                                v-else
                                class="clear-btn"
                                @click="clearAttributeValueInput(index)">-</button>
                            <button
                                class="add-btn"
                                @click="addAttributeValueInput"
                                v-if="index === attributeValues.length - 1">+</button>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="cancel-btn" @click="closeAttributeValuesModal">取消</button>
                    <button class="save-btn" @click="saveAttributeValues">保存</button>
                </div>
            </div>
        </div>

        <!-- 新增品牌弹窗 -->
        <div class="modal-overlay" v-if="showAddBrandModal">
            <div class="modal">
                <div class="modal-header">
                    <h3>新增品牌</h3>
                    <button class="close-btn" @click="closeAddBrandModal">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="addBrandName">名称 <span class="required">*</span></label>
                        <input type="text" id="addBrandName" v-model="addBrandData.name" placeholder="请输入名称" required>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="cancel-btn" @click="closeAddBrandModal">取消</button>
                    <button class="save-btn" @click="saveAddBrand">确定</button>
                </div>
            </div>
        </div>

        <!-- 编辑品牌弹窗 -->
        <div class="modal-overlay" v-if="showEditBrandModal">
            <div class="modal">
                <div class="modal-header">
                    <h3>编辑品牌</h3>
                    <button class="close-btn" @click="closeEditBrandModal">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="editBrandName">名称 <span class="required">*</span></label>
                        <input type="text" id="editBrandName" v-model="editBrandData.name" placeholder="请输入名称" required>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="cancel-btn" @click="closeEditBrandModal">取消</button>
                    <button class="save-btn" @click="saveEditBrand">确定</button>
                </div>
            </div>
        </div>

        <!-- 启用品牌确认弹窗 -->
        <div class="modal-overlay" v-if="showEnableBrandConfirm">
            <div class="modal">
                <div class="modal-header">
                    <h3>确认启用</h3>
                    <button class="close-btn" @click="closeEnableBrandConfirm">&times;</button>
                </div>
                <div class="modal-body">
                    <p>是否启用该品牌？</p>
                </div>
                <div class="modal-footer">
                    <button class="cancel-btn" @click="closeEnableBrandConfirm">否</button>
                    <button class="save-btn" @click="confirmEnableBrand">是</button>
                </div>
            </div>
        </div>

        <!-- 禁用品牌确认弹窗 -->
        <div class="modal-overlay" v-if="showDisableBrandConfirm">
            <div class="modal">
                <div class="modal-header">
                    <h3>确认禁用</h3>
                    <button class="close-btn" @click="closeDisableBrandConfirm">&times;</button>
                </div>
                <div class="modal-body">
                    <p>是否禁用该品牌？</p>
                </div>
                <div class="modal-footer">
                    <button class="cancel-btn" @click="closeDisableBrandConfirm">否</button>
                    <button class="delete-btn" @click="confirmDisableBrand">是</button>
                </div>
            </div>
        </div>

        <!-- 新增商品侧边抽屉 -->
        <div class="drawer-overlay" v-if="showAddGoodsDrawer" @click="closeAddGoodsDrawer">
            <div class="drawer" @click.stop>
                <div class="drawer-header">
                    <h3>新增商品</h3>
                    <button class="close-btn" @click="closeAddGoodsDrawer">&times;</button>
                </div>
                <div class="drawer-body">
                    <div class="form-group">
                        <label for="addGoodsName">名称 <span class="required">*</span></label>
                        <input type="text" id="addGoodsName" v-model="addGoodsData.name" placeholder="请输入商品名称" required>
                    </div>
                    <div class="form-group-row">
                        <div class="form-group-col">
                            <label for="addGoodsBrand">品牌 <span class="required">*</span></label>
                            <select id="addGoodsBrand" v-model="addGoodsData.brandid" class="styled-select" required>
                                <option value="">请选择品牌</option>
                                <option v-for="brand in activeBrands" :key="brand.id" :value="brand.id">{{ brand.name }}</option>
                            </select>
                        </div>
                        <div class="form-group-col">
                            <label for="addGoodsClassify">类型 <span class="required">*</span></label>
                            <select id="addGoodsClassify" v-model="addGoodsData.classifyid" class="styled-select" required>
                                <option value="">请选择类型</option>
                                <option v-for="classify in activeClassifies" :key="classify.id" :value="classify.id">{{ classify.name }}</option>
                            </select>
                        </div>
                        <div class="form-group-col">
                            <label for="addGoodsIsGroup">组合售卖 <span class="required">*</span></label>
                            <select id="addGoodsIsGroup" v-model.number="addGoodsData.isgroup" class="styled-select" @change="onIsGroupChange" required>
                                <option :value="1">否（单独售卖）</option>
                                <option :value="0">是（套餐）</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="addGoodsPrice">标准售价 <span class="required">*</span></label>
                        <input type="number" step="0.01" id="addGoodsPrice" v-model="addGoodsData.price" placeholder="请输入标准售价" required>
                    </div>
                    <div class="form-group" v-if="addGoodsData.isgroup == 0">
                        <label>商品总价（仅供参考）</label>
                        <input type="text" :value="totalGoodsPrice" readonly class="readonly-input">
                    </div>
                    <div class="form-group" v-if="addGoodsData.isgroup == 0">
                        <label>包含商品 <span class="required">*</span></label>
                        <table class="included-goods-table" v-if="selectedIncludedGoods.length > 0">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>商品名称</th>
                                    <th>标准售价</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="(goods, index) in selectedIncludedGoods" :key="goods.id">
                                    <td>{{ goods.id }}</td>
                                    <td>{{ goods.name }}</td>
                                    <td>{{ goods.price }}</td>
                                    <td>
                                        <button type="button" class="delete-btn" @click="removeIncludedGoods(index)">删除</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <button type="button" class="add-included-btn" @click="openAddIncludedGoodsModal">+ 新增包含商品</button>
                    </div>
                    <div class="form-group">
                        <label>属性</label>
                        <div v-for="(row, index) in goodsAttributeRows" :key="index" class="attribute-row">
                            <select v-model="row.attributeId" @change="onRowAttributeChange(index)" class="styled-select attr-select">
                                <option value="">请选择属性</option>
                                <option v-for="attr in getAvailableAttributes(index)" :key="attr.id" :value="attr.id">{{ attr.name }}</option>
                            </select>
                            <select v-model="row.valueId" class="styled-select value-select">
                                <option value="">请选择属性值</option>
                                <option v-for="value in getAttributeValues(row.attributeId)" :key="value.id" :value="value.id">{{ value.name }}</option>
                            </select>
                            <div class="row-buttons">
                                <button type="button" class="row-add-btn" @click="addAttributeRow" v-if="index === goodsAttributeRows.length - 1">+</button>
                                <button type="button" class="row-remove-btn" @click="removeAttributeRow(index)" v-if="goodsAttributeRows.length > 1">-</button>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>规格</label>
                        <div v-for="(row, index) in goodsSpecRows" :key="index" class="attribute-row">
                            <select v-model="row.attributeId" @change="onRowSpecChange(index)" class="styled-select attr-select">
                                <option value="">请选择规格</option>
                                <option v-for="spec in getAvailableSpecs(index)" :key="spec.id" :value="spec.id">{{ spec.name }}</option>
                            </select>
                            <select v-model="row.valueId" class="styled-select value-select">
                                <option value="">请选择规格值</option>
                                <option v-for="value in getAttributeValues(row.attributeId)" :key="value.id" :value="value.id">{{ value.name }}</option>
                            </select>
                            <div class="row-buttons">
                                <button type="button" class="row-add-btn" @click="addSpecRow" v-if="index === goodsSpecRows.length - 1">+</button>
                                <button type="button" class="row-remove-btn" @click="removeSpecRow(index)" v-if="goodsSpecRows.length > 1">-</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="drawer-footer">
                    <button class="cancel-btn" @click="closeAddGoodsDrawer">取消</button>
                    <button class="save-btn" @click="saveAddGoods">确定</button>
                </div>
            </div>
        </div>

        <!-- 编辑商品侧边抽屉 -->
        <div class="drawer-overlay" v-if="showEditGoodsDrawer" @click="closeEditGoodsDrawer">
            <div class="drawer" @click.stop>
                <div class="drawer-header">
                    <h3>编辑商品</h3>
                    <button class="close-btn" @click="closeEditGoodsDrawer">&times;</button>
                </div>
                <div class="drawer-body">
                    <div class="form-group">
                        <label for="editGoodsName">名称 <span class="required">*</span></label>
                        <input type="text" id="editGoodsName" v-model="editGoodsData.name" placeholder="请输入商品名称" required>
                    </div>
                    <div class="form-group-row">
                        <div class="form-group-col">
                            <label for="editGoodsBrand">品牌 <span class="required">*</span></label>
                            <select id="editGoodsBrand" v-model="editGoodsData.brandid" class="styled-select" required>
                                <option value="">请选择品牌</option>
                                <option v-for="brand in activeBrands" :key="brand.id" :value="brand.id">{{ brand.name }}</option>
                            </select>
                        </div>
                        <div class="form-group-col">
                            <label for="editGoodsClassify">类型 <span class="required">*</span></label>
                            <select id="editGoodsClassify" v-model="editGoodsData.classifyid" class="styled-select" required>
                                <option value="">请选择类型</option>
                                <option v-for="classify in activeClassifies" :key="classify.id" :value="classify.id">{{ classify.name }}</option>
                            </select>
                        </div>
                        <div class="form-group-col">
                            <label>组合售卖</label>
                            <select v-model.number="editGoodsData.isgroup" class="styled-select disabled-select" disabled>
                                <option :value="1">否（单独售卖）</option>
                                <option :value="0">是（套餐）</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="editGoodsPrice">标准售价 <span class="required">*</span></label>
                        <input type="number" step="0.01" id="editGoodsPrice" v-model="editGoodsData.price" placeholder="请输入标准售价" required>
                    </div>
                    <div class="form-group" v-if="editGoodsData.isgroup == 0">
                        <label>商品总价（仅供参考）</label>
                        <input type="text" :value="totalGoodsPrice" readonly class="readonly-input">
                    </div>
                    <div class="form-group" v-if="editGoodsData.isgroup == 0">
                        <label>包含商品 <span class="required">*</span></label>
                        <table class="included-goods-table" v-if="selectedIncludedGoods.length > 0">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>商品名称</th>
                                    <th>标准售价</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="(goods, index) in selectedIncludedGoods" :key="goods.id">
                                    <td>{{ goods.id }}</td>
                                    <td>{{ goods.name }}</td>
                                    <td>{{ goods.price }}</td>
                                    <td>
                                        <button type="button" class="delete-btn" @click="removeIncludedGoods(index)">删除</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <button type="button" class="add-included-btn" @click="openAddIncludedGoodsModal">+ 新增包含商品</button>
                    </div>
                    <div class="form-group">
                        <label>属性</label>
                        <div v-for="(row, index) in goodsAttributeRows" :key="index" class="attribute-row">
                            <select v-model="row.attributeId" @change="onRowAttributeChange(index)" class="styled-select attr-select">
                                <option value="">请选择属性</option>
                                <option v-for="attr in getAvailableAttributes(index)" :key="attr.id" :value="attr.id">{{ attr.name }}</option>
                            </select>
                            <select v-model="row.valueId" class="styled-select value-select">
                                <option value="">请选择属性值</option>
                                <option v-for="value in getAttributeValues(row.attributeId)" :key="value.id" :value="value.id">{{ value.name }}</option>
                            </select>
                            <div class="row-buttons">
                                <button type="button" class="row-add-btn" @click="addAttributeRow" v-if="index === goodsAttributeRows.length - 1">+</button>
                                <button type="button" class="row-remove-btn" @click="removeAttributeRow(index)" v-if="goodsAttributeRows.length > 1">-</button>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>规格</label>
                        <div v-for="(row, index) in goodsSpecRows" :key="index" class="attribute-row">
                            <select v-model="row.attributeId" @change="onRowSpecChange(index)" class="styled-select attr-select">
                                <option value="">请选择规格</option>
                                <option v-for="spec in getAvailableSpecs(index)" :key="spec.id" :value="spec.id">{{ spec.name }}</option>
                            </select>
                            <select v-model="row.valueId" class="styled-select value-select">
                                <option value="">请选择规格值</option>
                                <option v-for="value in getAttributeValues(row.attributeId)" :key="value.id" :value="value.id">{{ value.name }}</option>
                            </select>
                            <div class="row-buttons">
                                <button type="button" class="row-add-btn" @click="addSpecRow" v-if="index === goodsSpecRows.length - 1">+</button>
                                <button type="button" class="row-remove-btn" @click="removeSpecRow(index)" v-if="goodsSpecRows.length > 1">-</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="drawer-footer">
                    <button class="cancel-btn" @click="closeEditGoodsDrawer">取消</button>
                    <button class="save-btn" @click="saveEditGoods">确定</button>
                </div>
            </div>
        </div>

        <!-- 新增包含商品子弹窗 -->
        <div class="modal-overlay" v-if="showAddIncludedGoodsModal">
            <div class="modal">
                <div class="modal-header">
                    <h3>新增包含商品</h3>
                    <button class="close-btn" @click="closeAddIncludedGoodsModal">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="includedGoodsName">商品名称 <span class="required">*</span></label>
                        <select id="includedGoodsName" v-model="addIncludedGoodsData.goods_id" @change="onIncludedGoodsChange" class="styled-select" required>
                            <option value="">请选择商品</option>
                            <option v-for="goods in availableGoodsForSelection" :key="goods.id" :value="goods.id">
                                {{ goods.name }}
                            </option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="includedGoodsBrand">品牌</label>
                        <input type="text" id="includedGoodsBrand" v-model="addIncludedGoodsData.brand_name" readonly class="readonly-input">
                    </div>
                    <div class="form-group">
                        <label for="includedGoodsClassify">类型</label>
                        <input type="text" id="includedGoodsClassify" v-model="addIncludedGoodsData.classify_name" readonly class="readonly-input">
                    </div>
                    <div class="form-group">
                        <label for="includedGoodsAttributes">属性+属性值</label>
                        <input type="text" id="includedGoodsAttributes" v-model="addIncludedGoodsData.attributes" readonly class="readonly-input">
                    </div>
                    <div class="form-group">
                        <label for="includedGoodsPrice">标准售价</label>
                        <input type="text" id="includedGoodsPrice" v-model="addIncludedGoodsData.price" readonly class="readonly-input">
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="cancel-btn" @click="closeAddIncludedGoodsModal">取消</button>
                    <button class="save-btn" @click="saveIncludedGoods">保存</button>
                </div>
            </div>
        </div>

        <!-- 启用商品确认弹窗 -->
        <div class="modal-overlay" v-if="showEnableGoodsConfirm">
            <div class="modal">
                <div class="modal-header">
                    <h3>确认启用</h3>
                    <button class="close-btn" @click="closeEnableGoodsConfirm">&times;</button>
                </div>
                <div class="modal-body">
                    <p>是否启用该商品？</p>
                </div>
                <div class="modal-footer">
                    <button class="cancel-btn" @click="closeEnableGoodsConfirm">否</button>
                    <button class="save-btn" @click="confirmEnableGoods">是</button>
                </div>
            </div>
        </div>

        <!-- 禁用商品确认弹窗 -->
        <div class="modal-overlay" v-if="showDisableGoodsConfirm">
            <div class="modal">
                <div class="modal-header">
                    <h3>确认禁用</h3>
                    <button class="close-btn" @click="closeDisableGoodsConfirm">&times;</button>
                </div>
                <div class="modal-body">
                    <p>是否禁用该商品？</p>
                </div>
                <div class="modal-footer">
                    <button class="cancel-btn" @click="closeDisableGoodsConfirm">否</button>
                    <button class="delete-btn" @click="confirmDisableGoods">是</button>
                </div>
            </div>
        </div>
    </div>
    <script src="app.js"></script>
</body>
</html>
